<!-- <ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="toggleSidebar()">
        <ion-icon slot="icon-only" name="menu"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Admin Dashboard</ion-title>
    <ion-buttons slot="end">
      <ion-button>
        <ion-icon slot="icon-only" name="search"></ion-icon>
      </ion-button>
      <ion-button>
        <ion-icon slot="icon-only" name="notifications"></ion-icon>
      </ion-button>
      <ion-button>
        <ion-icon slot="icon-only" name="person-circle"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header> -->
<ion-header>
  <ion-toolbar>
    
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="dashboard-container" [class.sidebar-collapsed]="sidebarCollapsed">
  <nav class="sidebar">
    <ion-list>
      <ion-item button [class.active]="activeMenu === 'dashboard'" (click)="setActiveMenu('dashboard')">
        <ion-icon slot="start" name="speedometer"></ion-icon>
        <ion-label>Dashboard</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'management'" (click)="setActiveMenu('management')">
        <ion-icon slot="start" name="analytics"></ion-icon>
        <ion-label>Service Management</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'worker-management'" (click)="setActiveMenu('worker-management')">
        <ion-icon slot="start" name="megaphone"></ion-icon>
        <ion-label>Worker Management</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'product-management'" (click)="setActiveMenu('product-management')">
        <ion-icon slot="start" name="settings"></ion-icon>
        <ion-label>Product Management</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'service-requests'" (click)="setActiveMenu('service-requests')">
        <ion-icon slot="start" name="help-circle"></ion-icon>
        <ion-label>Service Requests</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'orders-management'" (click)="setActiveMenu('orders-management')">
        <ion-icon slot="start" name="eye"></ion-icon>
        <ion-label>Order Management</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'shop-location'" (click)="setActiveMenu('shop-location')">
        <ion-icon slot="start" name="logo-bitcoin"></ion-icon>
        <ion-label>Location Setup</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'project-management'" (click)="setActiveMenu('project-management')">
        <ion-icon slot="start" name="briefcase"></ion-icon>
        <ion-label>Project Management</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'notifications'" (click)="setActiveMenu('notifications')">
        <ion-icon slot="start" name="cube"></ion-icon>
        <ion-label>Promotional Messages</ion-label>
      </ion-item>
      <ion-item button [class.active]="activeMenu === 'statistics'" (click)="setActiveMenu('statistics')">
        <ion-icon slot="start" name="bar-chart"></ion-icon>
        <ion-label>Statistics</ion-label>
      </ion-item>
    </ion-list>
  </nav>

  <main class="main-content">
    <!-- Hero Section -->
    <div id="hero-section" class="hero-section">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">Benlee Cleaning & Delivery</h1>
          <p class="hero-subtitle">Manage your delivery services, workers, and operations with ease</p>
        </div>
        <div class="hero-stats">
          <div class="stat-item">
            <ion-icon name="business" class="stat-icon"></ion-icon>
            <div class="stat-info">
              <span class="stat-number">{{ services.length }}</span>
              <span class="stat-label">Services</span>
            </div>
          </div>
          <div class="stat-item">
            <ion-icon name="people" class="stat-icon"></ion-icon>
            <div class="stat-info">
              <span class="stat-number">{{ workers.length }}</span>
              <span class="stat-label">Workers</span>
            </div>
          </div>
          <div class="stat-item">
            <ion-icon name="cart" class="stat-icon"></ion-icon>
            <div class="stat-info">
              <span class="stat-number">{{ orders.length }}</span>
              <span class="stat-label">Orders</span>
            </div>
          </div>
          <div class="stat-item">
            <ion-icon name="car" class="stat-icon"></ion-icon>
            <div class="stat-info">
              <span class="stat-number">{{ deliveries.length }}</span>
              <span class="stat-label">Deliveries</span>
            </div>
          </div>
        </div>
      </div>
      <div class="hero-decoration">
        <div class="floating-shapes">
          <div class="shape shape-1"></div>
          <div class="shape shape-2"></div>
          <div class="shape shape-3"></div>
        </div>
      </div>
    </div>

    <!-- Service Management Card -->
    <ion-card id="service-management">
      <ion-card-header>
        <ion-card-title>Service Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="full" (click)="openAddServiceModal()">+ Add Service</ion-button>
        <div class="item-grid">
          <div class="item-card" *ngFor="let service of servicesExpanded ? services : services.slice(0, 3)">
            <div class="item-content">
              <h3>{{ service.name }}</h3>
              <p>{{ service.description }}</p>
              <p>Base Price: GHS{{ service.base_price }}</p>
              <p>Distance Rate: GHS{{ service.distance_rate }}/km</p>
            </div>
            <div class="item-actions">
              <ion-button size="small" (click)="updateService(service.id)">Update</ion-button>
              <ion-button size="small" color="danger" (click)="deleteService(service.id)">Delete</ion-button>
            </div>
          </div>
        </div>
        <ion-button fill="outline" expand="full" *ngIf="services.length > 3" (click)="seeMoreServices()">{{ servicesExpanded ? 'Show Less Services' : 'See More Services' }}</ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Worker Management Card -->
    <ion-card id="worker-management">
      <ion-card-header>
        <ion-card-title>Worker Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="full" (click)="openAddWorkerModal()">+ Add Worker</ion-button>
        <div class="item-grid">
          <div class="item-card" *ngFor="let worker of workersExpanded ? workers : workers.slice(0, 3)">
            <div class="item-content">
              <h3>{{ worker.name }}</h3>
              <p>Phone: {{ worker.phone_number }}</p>
              <p *ngIf="worker.worker_type === 'delivery_driver'">Vehicle: {{ worker.vehicle_type }} ({{ worker.vehicle_plate }})</p>
              <p *ngIf="worker.worker_type === 'service_worker'">Service: {{ worker.service_type }}</p>
              <p>Available: {{ worker.is_available ? 'Yes' : 'No' }}</p>
            </div>
            <div class="item-actions">
              <ion-button size="small" (click)="updateWorker(worker.id)">Update</ion-button>
              <ion-button size="small" color="danger" (click)="deleteWorker(worker.id)">Delete</ion-button>
            </div>
          </div>
        </div>
        <ion-button fill="outline" expand="full" *ngIf="workers.length > 3" (click)="seeMoreWorkers()">{{ workersExpanded ? 'Show Less Workers' : 'See More Workers' }}</ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Product Management Card -->
    <ion-card id="product-management">
      <ion-card-header>
        <ion-card-title>Product Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="full" (click)="openAddProductModal()">+ Add Product</ion-button>
        <div class="item-grid">
          <div class="item-card" *ngFor="let product of productsExpanded ? products : products.slice(0, 3)">
            <div class="item-content">
              <h3>{{ product.name }}</h3>
              <p>{{ product.description }}</p>
              <p>Price: GHS{{ product.base_price }}</p>
              <p>Stock: {{ product.stock_quantity }}</p>
            </div>
            <div class="item-actions">
              <ion-button size="small" (click)="updateProduct(product.id)">Update</ion-button>
              <ion-button size="small" color="danger" (click)="deleteProduct(product.id)">Delete</ion-button>
            </div>
          </div>
        </div>
        <ion-button fill="outline" expand="full" *ngIf="products.length > 3" (click)="seeMoreProducts()">{{ productsExpanded ? 'Show Less Products' : 'See More Products' }}</ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Service Requests Section -->
    <ion-card id="service-requests">
      <ion-card-header>
        <ion-card-title>Service Requests</ion-card-title>
        <ion-button fill="clear" (click)="loadServiceRequests()" [disabled]="loadingServiceRequests">
          <ion-icon name="refresh" *ngIf="!loadingServiceRequests"></ion-icon>
          <ion-icon name="refresh-circle" *ngIf="loadingServiceRequests"></ion-icon>
        </ion-button>
      </ion-card-header>
      <ion-card-content>
        <div class="item-grid">
          <div class="item-card" *ngFor="let request of serviceRequestsExpanded ? serviceRequests : serviceRequests.slice(0, 4)">
            <div class="item-content">
              <h3>Service Request #{{ request.id }}</h3>
              <p>Service: {{ request.service?.name || 'N/A' }}</p>
              <p>User: {{ request.user?.name || 'N/A' }}</p>
              <p>Status: <ion-badge [color]="request.status === 'pending' ? 'warning' : request.status === 'accepted' ? 'primary' : request.status === 'completed' ? 'success' : 'medium'">{{ request.status || 'Pending' }}</ion-badge></p>
              <p>Worker: {{ request.worker?.name || 'Not Assigned' }}</p>
            </div>
            <div class="item-actions">
              <ion-select placeholder="Assign Worker" (ionChange)="assignWorkerToServiceRequest(request.id, $event.detail.value)" *ngIf="request.status !== 'completed'">
                <ion-select-option *ngFor="let worker of workers" [value]="worker.id">{{ worker.name }}</ion-select-option>
              </ion-select>
            </div>
          </div>
        </div>
        <ion-button fill="outline" expand="full" *ngIf="serviceRequests.length > 4" (click)="seeMoreServiceRequests()">{{ serviceRequestsExpanded ? 'Show Less Service Requests' : 'See More Service Requests' }}</ion-button>
        <ion-text color="medium" *ngIf="loadingServiceRequests">
          <p>Loading service requests...</p>
        </ion-text>
        <ion-text color="medium" *ngIf="!loadingServiceRequests && serviceRequests.length === 0">
          <p>No service requests found.</p>
        </ion-text>
      </ion-card-content>
    </ion-card>

    <!-- Orders Management Section -->
    <ion-card id="orders-management" class="orders-section">
      <ion-card-header>
        <ion-card-title>Orders Management</ion-card-title>
        <ion-button fill="clear" (click)="loadOrders()" [disabled]="loadingOrders">
          <ion-icon name="refresh" *ngIf="!loadingOrders"></ion-icon>
          <ion-icon name="refresh-circle" *ngIf="loadingOrders"></ion-icon>
        </ion-button>
      </ion-card-header>
      <ion-card-content>
        <div class="item-grid">
          <div class="item-card" *ngFor="let order of ordersExpanded ? orders : orders.slice(0, 4)">
            <div class="order-header">
              <h3 class="order-title">
                <ion-icon class="order-id-icon" name="document"></ion-icon>
                Order #{{ order.id }}
              </h3>
              <div class="order-status" [ngClass]="order.status?.toLowerCase()">
                {{ order.status || 'Pending' }}
              </div>
            </div>
            <div class="order-details">
              <div class="detail-item">
                <ion-icon class="detail-icon" name="person-circle"></ion-icon>
                <div>
                  <div class="detail-label">User</div>
                  <div class="detail-value">{{ order.user?.name || 'N/A' }}</div>
                </div>
              </div>
              <div class="detail-item">
                <ion-icon class="detail-icon" name="location"></ion-icon>
                <div>
                  <div class="detail-label">Pickup</div>
                  <div class="detail-value">{{ order.pickup_location || 'N/A' }}</div>
                </div>
              </div>
              <div class="detail-item">
                <ion-icon class="detail-icon" name="car"></ion-icon>
                <div>
                  <div class="detail-label">Delivery</div>
                  <div class="detail-value">{{ order.delivery_location || 'N/A' }}</div>
                </div>
              </div>
              <div class="detail-item">
                <ion-icon class="detail-icon" name="person"></ion-icon>
                <div>
                  <div class="detail-label">Worker</div>
                  <div class="detail-value">{{ order.worker?.name || 'Not Assigned' }}</div>
                </div>
              </div>
            </div>
            <div class="order-total">
              <div class="total-label">Total Amount</div>
              <div class="total-amount">GHS{{ order.total_amount || '0.00' }}</div>
            </div>
            <div class="item-actions">
              <ion-select class="assign-worker" placeholder="Assign Worker" (ionChange)="assignWorkerToOrder(order.id, $event.detail.value)" *ngIf="order.status !== 'completed'">
                <ion-select-option *ngFor="let worker of workers" [value]="worker.id">{{ worker.name }}</ion-select-option>
              </ion-select>
            </div>
          </div>
        </div>
        <ion-button fill="outline" expand="full" *ngIf="orders.length > 4" (click)="seeMoreOrders()">{{ ordersExpanded ? 'Show Less Orders' : 'See More Orders' }}</ion-button>
        <ion-text color="medium" *ngIf="loadingOrders">
          <p>Loading orders...</p>
        </ion-text>
        <ion-text color="medium" *ngIf="!loadingOrders && orders.length === 0">
          <p>No orders found.</p>
        </ion-text>
      </ion-card-content>
    </ion-card>

    <!-- Delivery Management Section -->
    <ion-card id="delivery-management">
      <ion-card-header>
        <ion-card-title>Delivery Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="item-grid">
          <div class="item-card" *ngFor="let delivery of deliveriesExpanded ? deliveries : deliveries.slice(0, 4)">
            <div class="item-content">
              <h3>Delivery #{{ delivery.id }}</h3>
              <p>From: {{ delivery.pickup_address || 'N/A' }}</p>
              <p>To: {{ delivery.destination_address || 'N/A' }}</p>
              <p>Status: <ion-badge [color]="delivery.status === 'pending' ? 'warning' : delivery.status === 'in_transit' ? 'primary' : delivery.status === 'delivered' ? 'success' : 'medium'">{{ delivery.status || 'Pending' }}</ion-badge></p>
              <p>Worker: {{ delivery.worker?.name || 'Not Assigned' }}</p>
            </div>
            <div class="item-actions">
              <ion-button size="small" fill="outline" (click)="trackDelivery(delivery.id)">
                <ion-icon name="location" slot="start"></ion-icon>
                Track
              </ion-button>
              <ion-button size="small" (click)="updateDeliveryStatus(delivery.id)">Update</ion-button>
            </div>
          </div>
        </div>
        <ion-button fill="outline" expand="full" *ngIf="deliveries.length > 4" (click)="seeMoreDeliveries()">{{ deliveriesExpanded ? 'Show Less Deliveries' : 'See More Deliveries' }}</ion-button>
        <ion-text color="medium" *ngIf="deliveries.length === 0">
          <p>No deliveries found.</p>
        </ion-text>
      </ion-card-content>
    </ion-card>

    <!-- Shop Location Management Section -->
    <ion-card id="shop-location">
      <ion-card-header>
        <ion-card-title>Shop Location Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label position="floating">Address</ion-label>
          <ion-input [(ngModel)]="shopLocation.address" placeholder="Enter shop address"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Latitude</ion-label>
          <ion-input type="number" [(ngModel)]="shopLocation.latitude" placeholder="Enter latitude"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Longitude</ion-label>
          <ion-input type="number" [(ngModel)]="shopLocation.longitude" placeholder="Enter longitude"></ion-input>
        </ion-item>
        <ion-button expand="full" (click)="saveShopLocation()" [disabled]="shopLocationLoading">
          Save Location
        </ion-button>
        <ion-text color="medium" *ngIf="shopLocationLoading">
          <p>Saving shop location...</p>
        </ion-text>
        <!-- Google Maps Integration -->
        <div id="map" style="height: 300px; margin-top: 10px; border: 1px solid #ccc; border-radius: 4px;">
          <!-- Map will be loaded here -->
        </div>
        <ion-text color="medium" style="font-size: 12px; margin-top: 5px;">
          <p>Click on the map to set the shop location coordinates</p>
        </ion-text>
      </ion-card-content>
    </ion-card>

    <!-- Invoice Management Section -->
    <ion-card id="invoice-management">
      <ion-card-header>
        <ion-card-title>Invoice Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let invoice of invoices">
            <ion-label>
              <h2>Invoice #{{ invoice.id }}</h2>
              <p>User: {{ invoice.user?.name || 'N/A' }}</p>
              <p>Total Amount: GHS{{ invoice.total_amount || '0.00' }}</p>
              <p>Status: {{ invoice.status || 'Pending' }}</p>
            </ion-label>
            <ion-button (click)="updateInvoice(invoice.id,invoice)">Update</ion-button>
            <ion-button color="danger" (click)="deleteInvoice(invoice.id)">Delete</ion-button>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Admin Chat Support Section -->
    <ion-card id="chat-support">
      <ion-card-header>
        <ion-card-title>Chat Support</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="full" (click)="navigateToChatSupport()">Chat Support</ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Notification Management Section -->
    <ion-card id="notifications">
      <ion-card-header>
        <ion-card-title>Promotional Notifications</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <app-notification-list></app-notification-list>
      </ion-card-content>
    </ion-card>

    <!-- Analytics Section -->
    <ion-card id="analytics-section">
      <ion-card-header>
        <ion-card-title>Analytics</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <h3>Service Requests Analytics</h3>
        <div>
          <canvas id="service-request-chart"></canvas>
        </div>
        <div>
          <canvas id="delivery-chart"></canvas>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Conversation Management Section -->
    <ion-card id="conversations">
      <ion-card-header>
        <ion-card-title>Conversation Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let conversation of conversations" (click)="openConversation(conversation)">
            <ion-label>
              <h2>Conversation with {{ conversation.participants.join(', ') }}</h2>
              <p>{{ conversation.lastMessage.content }}</p>
              <ion-badge color="primary">{{ conversation.unreadCount }} unread</ion-badge>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </main>
</div>

<!-- Add Service Modal -->
<ion-modal #addServiceModal>
  <ng-template>
    <ion-content>
      <ion-header>
        <ion-toolbar>
          <ion-title>Add Service</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeAddServiceModal()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-label position="floating">Service Name</ion-label>
          <ion-input [(ngModel)]="newService.name"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Description</ion-label>
          <ion-textarea [(ngModel)]="newService.description"></ion-textarea>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Base Price</ion-label>
          <ion-input type="number" [(ngModel)]="newService.base_price"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Distance Rate</ion-label>
          <ion-input type="number" [(ngModel)]="newService.distance_rate"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Admin Latitude</ion-label>
          <ion-input type="number" [(ngModel)]="newService.admin_latitude"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Admin Longitude</ion-label>
          <ion-input type="number" [(ngModel)]="newService.admin_longitude"></ion-input>
        </ion-item>
        <ion-button expand="full" (click)="addService()" [disabled]="addingService">
          <ion-spinner slot="start" *ngIf="addingService"></ion-spinner>
          {{ addingService ? 'Adding Service...' : 'Add Service' }}
        </ion-button>
      </ion-content>
    </ion-content>
  </ng-template>
</ion-modal>

<!-- Add Worker Modal -->
<ion-modal #addWorkerModal>
  <ng-template>
    <ion-content>
      <ion-header>
        <ion-toolbar>
          <ion-title>Add Worker</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeAddWorkerModal()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <form [formGroup]="workerForm" (ngSubmit)="addWorker()">
          <ion-item>
            <ion-label position="floating">Full Name</ion-label>
            <ion-input
              formControlName="name"
              placeholder="Enter worker's full name">
            </ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Phone Number</ion-label>
            <ion-input
              formControlName="phone_number"
              type="tel"
              placeholder="Enter phone number">
            </ion-input>
          </ion-item>

          <!-- Worker Type Selection -->
          <ion-item>
            <ion-label>Worker Type</ion-label>
          </ion-item>
          <ion-radio-group formControlName="worker_type" (ionChange)="onWorkerTypeChange($event)" class="worker-type-radio">
            <ion-item>
              <ion-label>Delivery Driver</ion-label>
              <ion-radio slot="start" value="delivery_driver"></ion-radio>
            </ion-item>
            <ion-item>
              <ion-label>Service Worker</ion-label>
              <ion-radio slot="start" value="service_worker"></ion-radio>
            </ion-item>
          </ion-radio-group>

          <!-- Vehicle Type - Only show for delivery drivers -->
          <ion-item *ngIf="workerForm.get('worker_type')?.value === 'delivery_driver'">
            <ion-label position="floating">Vehicle Type</ion-label>
            <ion-select formControlName="vehicle_type" placeholder="Select vehicle type">
              <ion-select-option value="motorcycle">Motorcycle</ion-select-option>
              <ion-select-option value="car">Car</ion-select-option>
              <ion-select-option value="van">Van</ion-select-option>
              <ion-select-option value="truck">Truck</ion-select-option>
              <ion-select-option value="bicycle">Bicycle</ion-select-option>
            </ion-select>
          </ion-item>

          <!-- Vehicle Registration - Only show for delivery drivers -->
          <ion-item *ngIf="workerForm.get('worker_type')?.value === 'delivery_driver'">
            <ion-label position="floating">Vehicle Registration</ion-label>
            <ion-input
              formControlName="vehicle_registration"
              placeholder="Enter vehicle registration number">
            </ion-input>
          </ion-item>

          <!-- Service Type - Only show for service workers -->
          <ion-item *ngIf="workerForm.get('worker_type')?.value === 'service_worker'">
            <ion-label position="floating">Service Type</ion-label>
            <ion-select formControlName="service_type" placeholder="Select service type">
              <ion-select-option *ngFor="let service of services" [value]="service.name">{{ service.name }}</ion-select-option>
            </ion-select>
          </ion-item>

          <ion-text color="medium" style="font-size: 12px; margin-bottom: 10px;">
            <p>Note: Worker will receive SMS/Email to set their password after creation.</p>
          </ion-text>

          <ion-button
            expand="full"
            type="submit"
            class="ion-margin-top"
            [disabled]="addingWorker">
            <ion-spinner slot="start" *ngIf="addingWorker"></ion-spinner>
            {{ addingWorker ? 'Adding Worker...' : 'Add Worker' }}
          </ion-button>
        </form>

        <div class="error-message" *ngIf="workerErrorMessage">
          <ion-text color="danger">{{ workerErrorMessage }}</ion-text>
        </div>
      </ion-content>
    </ion-content>
  </ng-template>
</ion-modal>

<!-- Add Product Modal -->
<ion-modal #addProductModal>
  <ng-template>
    <ion-content>
      <ion-header>
        <ion-toolbar>
          <ion-title>Add Product</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeAddProductModal()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-label position="floating">Product Name</ion-label>
          <ion-input [(ngModel)]="newProduct.name"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Description</ion-label>
          <ion-textarea [(ngModel)]="newProduct.description"></ion-textarea>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Base Price</ion-label>
          <ion-input type="number" [(ngModel)]="newProduct.base_price"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Stock Quantity</ion-label>
          <ion-input type="number" [(ngModel)]="newProduct.stock_quantity"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Image URL</ion-label>
          <ion-input [(ngModel)]="newProduct.image_url"></ion-input>
        </ion-item>
        <ion-button expand="full" (click)="addProduct()" [disabled]="addingProduct">
          <ion-spinner slot="start" *ngIf="addingProduct"></ion-spinner>
          {{ addingProduct ? 'Adding Product...' : 'Add Product' }}
        </ion-button>
      </ion-content>
    </ion-content>
  </ng-template>
</ion-modal>

